(define-namespace 'test (sig-keyset) (sig-keyset))
(env-data { 'ns: 'test })

(load "../../poseidon/src/lib.repl")
(load "../src/lib.repl")

(env-gasmodel "table")
(env-gaslimit 10000000)
(env-gas 0)

(expect "merkle" {"root": "OKCZZGtqfiSv896M7Mz-xp_LHrhOA4t-IlBndTuL-6c", "index": 1} (insert-leaf "1"))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": "5KDDGKjUp2r1GOeBiVPEYKn9ptA28xtScJHWvcqhm84", "index": 2} (insert-leaf "2"))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": "jo-KIQTxADGTCgLow3LzIVCVzQtTqXDQgdhqYzJXGfo", "index": 3} (insert-leaf "3"))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": "s7ykG_4DWRoM5Eq3Tci1NUqa_UV09T2jXOBuw0oxffY", "index": 4} (insert-leaf "4"))

(print {"Total gas": (env-gas)})