(define-namespace 'test (sig-keyset) (sig-keyset))
(env-data { "ns" : "test", "name" : "merkle" })

(load "../../poseidon/src/lib.repl")
(load "../src/lib.repl")

(env-gasmodel "table")
(env-gaslimit 10000000)
(env-gas 0)

(expect "merkle" {"root": 17768327531739137635329022207868489980356191875146762173607799814888012541462, "index": 1} (insert-leaf 1))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": 15831936945112555863238493351843930027916667404464948928031517068302210072385, "index": 2} (insert-leaf 2))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": 4852806347291050551478200157621574287500434197552751173261587703452862367219, "index": 3} (insert-leaf 3))

(print {"Total gas": (env-gas)})
(env-gas 0)

(expect "merkle" {"root": 3330844108758711782672220159612173083623710937399719017074673646455206473965, "index": 4} (insert-leaf 4))

(print {"Total gas": (env-gas)})